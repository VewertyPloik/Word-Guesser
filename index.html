<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Word Guesser</title>
<style>
body { font-family: sans-serif; background: #111; color: #eee; display: flex; flex-direction: column; align-items: center; margin: 0; }
h1 { margin-top: 20px; font-size: 28px; color: #ffcc00; text-shadow: 1px 1px 5px #000; }
#mode-selector { margin-top:10px; }
button { margin-left: 5px; margin-top:10px; padding: 8px 12px; font-size: 16px; cursor: pointer; background: #ffcc00; border: none; border-radius: 5px; color: #111; font-weight: bold; }
#level-info, #daily-info { margin-top: 10px; font-size: 20px; }
#game { margin-top: 20px; }
.row { display: flex; margin: 5px; }
.cell { width: 50px; height: 50px; margin: 3px; display: flex; justify-content: center; align-items: center; font-size: 24px; font-weight: bold; background: #333; border-radius: 8px; transition: transform 0.2s, background 0.2s; }
.cell.correct { background: #4caf50; color: white; transform: scale(1.1); }
.cell.present { background: #ff9800; color: white; transform: scale(1.1); }
.cell.absent { background: #555; color: white; }
input { margin-top: 20px; padding: 8px; font-size: 18px; width: 150px; text-transform: uppercase; }
#message { margin-top: 15px; font-size: 18px; min-height: 24px; }
#stats { margin-top: 10px; font-size: 16px; color: #ccc; }
/* popup */
#popup { display:none; position: fixed; top:50%; left:50%; transform: translate(-50%, -50%); background:#222; padding:20px; border-radius:10px; box-shadow:0 0 10px #000; color:#eee; text-align:center; }
#popup button { margin-top:10px; background:#ff4444; color:white; border:none; padding:5px 10px; border-radius:5px; cursor:pointer; }
</style>
</head>
<body>

<h1>Word Guesser By Vewerty Ploik</h1>

<div id="mode-selector">
  <button onclick="switchMode('levels')">50-Level Game</button>
  <button onclick="switchMode('daily')">Daily Word</button>
</div>

<div id="level-info"></div>
<div id="daily-info"></div>
<div id="game"></div>
<div>
  <input type="text" id="guess" maxlength="5" placeholder="Type your guess">
  <button onclick="submitGuess()">Guess</button>
  <button onclick="resetProgress()">Reset Progress</button>
</div>
<div id="message"></div>
<div id="stats">Total Guesses: 0 | Best: -</div>

<div id="popup">
  <div id="popup-message"></div>
  <button onclick="closePopup()">X</button>
</div>

<script>
// 50-Level Game Words (50 words)
const levels = [
  "FRIES","HOUSE","PLATE","DREAM","TRAIN","FIGHT","VIDEO","PUPPY","DRAFT","JUDGE",
  "LEASH","EARTH","MIGHT","WIRES","TREES","WATER","COULD","READY","SWORD","TREND",
  "WITCH","QUOTE","WORDS","CROWD","YOUNG","ZEBRA","ACORN","BLAZE","CHAIR","DELTA",
  "ELITE","FROST","GRAND","HURRY","INNER","JELLY","KNACK","LUNCH","MAGIC","NOBLE",
  "OCEAN","PLANT","QUERY","RIVAL","STONE","TRUST","USUAL","VALUE","WORST","YIELD"
];

// Daily Words - 40 words, all different from Levels
const dailyWordsList = [
  "GRASS","ORDER","TARPS","DARTS","CANDY","LIGHT","SHARP","BRAVE","SWEET","PLAIN",
  "PRIDE","QUICK","STORM","BLOOM","CATCH","FANCY","HAPPY","JOKER","MARCH","PIXEL",
  "RANCH","SPOON","VIVID","WHALE","ALERT","BROWN","CRISP","DEALT","EAGLE","FRAIL",
  "GLASS","HEART","INDEX","LEMON","MOUNT","PRISM","TWEAK","VOUCH","WALTZ","YIELD"
];

// Generate daily word by date
function getDailyWordByDate(date){
  const start = new Date("2025-09-20");
  const today = new Date(date);
  let diff = Math.floor((today - start)/(1000*60*60*24));
  const index = diff % dailyWordsList.length;
  return dailyWordsList[index];
}

// Game state
let mode = localStorage.getItem('mode') || 'levels';
let stats = {
  levels: JSON.parse(localStorage.getItem('levelsStats')) || {total:0,best:null},
  daily: JSON.parse(localStorage.getItem('dailyStats')) || {total:0,best:null}
};
let levelsCorrect = JSON.parse(localStorage.getItem('levelsCorrect')) || Array(50).fill(false);
let currentLevel = parseInt(localStorage.getItem('currentLevel')) || 0;
let guesses = 0;
let answer = '';

// Switch mode
function switchMode(m){
  mode = m;
  localStorage.setItem('mode',mode);
  guesses=0;
  document.getElementById('game').innerHTML='';
  document.getElementById('message').innerText='';

  if(mode==='levels'){
    document.getElementById('daily-info').innerText='';
    document.getElementById('guess').disabled = false;
    document.querySelector('button[onclick="submitGuess()"]').disabled = false;
    startLevel(currentLevel);
  } else {
    document.getElementById('level-info').innerText='';
    startDaily();
  }
  updateStats();
}

// Start level
function startLevel(lvl){
  currentLevel = lvl;
  answer = levels[currentLevel];
  guesses=0;
  document.getElementById('level-info').innerText=`Level ${currentLevel+1}`;
  document.getElementById('message').innerText='';
  document.getElementById('game').innerHTML='';
  updateStats();
  saveState();
}

// Start daily
function startDaily(){
  const today = new Date();
  answer = getDailyWordByDate(today);
  guesses=0;
  const options={year:'numeric',month:'long',day:'numeric'};
  const todayStr = today.toLocaleDateString(undefined,options);
  document.getElementById('daily-info').innerText=`Daily Word for ${todayStr}`;
  document.getElementById('message').innerText='';
  document.getElementById('game').innerHTML='';

  const lastDaily = localStorage.getItem('lastDailyPlay');
  const todayISO = today.toISOString().split("T")[0];

  if(lastDaily === todayISO){
    document.getElementById('message').innerText="You have already played today's word!";
    document.getElementById('guess').disabled = true;
    document.querySelector('button[onclick="submitGuess()"]').disabled = true;
  } else {
    document.getElementById('guess').disabled = false;
    document.querySelector('button[onclick="submitGuess()"]').disabled = false;
  }
  updateStats();
}

// Update stats
function updateStats(){
  let s = mode==='levels'?stats.levels:stats.daily;
  let best = s.best===null?'-':s.best;
  document.getElementById('stats').innerText=`Total Guesses: ${s.total} | Best: ${best}`;
}

// Save state
function saveState(){
  localStorage.setItem('levelsStats',JSON.stringify(stats.levels));
  localStorage.setItem('dailyStats',JSON.stringify(stats.daily));
  localStorage.setItem('levelsCorrect',JSON.stringify(levelsCorrect));
  localStorage.setItem('currentLevel',currentLevel);
  localStorage.setItem('mode',mode);
}

// Submit guess
function submitGuess(){
  const input = document.getElementById('guess');
  let guess = input.value.toUpperCase();
  if(guess.length!==5){ alert("Word must be 5 letters"); return; }

  guesses++;
  let s = mode==='levels'?stats.levels:stats.daily;
  s.total++;
  updateStats();

  const row=document.createElement('div');
  row.classList.add('row');

  let answerLetterCount={};
  for(let char of answer) answerLetterCount[char]=(answerLetterCount[char]||0)+1;

  let result=Array(5).fill('absent');
  for(let i=0;i<5;i++){
    if(guess[i]===answer[i]){
      result[i]='correct';
      answerLetterCount[guess[i]]--;
    }
  }
  for(let i=0;i<5;i++){
    if(result[i]!=='correct' && answerLetterCount[guess[i]]>0){
      result[i]='present';
      answerLetterCount[guess[i]]--;
    }
  }
  for(let i=0;i<5;i++){
    const cell=document.createElement('div');
    cell.classList.add('cell',result[i]);
    cell.innerText=guess[i];
    row.appendChild(cell);
  }
  document.getElementById('game').appendChild(row);
  input.value='';

  if(guess===answer){
    if(s.best===null || guesses<s.best) s.best=guesses;
    updateStats();

    if(mode==='levels'){
      levelsCorrect[currentLevel]=true;
      saveState();
      document.getElementById('message').innerText="Correct! Moving to next level.";
      if(currentLevel<49) setTimeout(()=>startLevel(currentLevel+1),1500);
      else document.getElementById('message').innerText="Congratulations! All 50 levels completed!";
    } else if(mode==='daily'){
      localStorage.setItem('lastDailyPlay', new Date().toISOString().split("T")[0]);
      saveState();
      document.getElementById('message').innerText="Correct! Well done for today's word!";
      document.getElementById('guess').disabled=true;
      document.querySelector('button[onclick=\"submitGuess()\"]').disabled=true;
    }

  } else if(guesses>=5){
    if(mode==='levels'){
      levelsCorrect[currentLevel]=false;
      saveState();
      showPopup(answer);
    } else if(mode==='daily'){
      localStorage.setItem('lastDailyPlay', new Date().toISOString().split("T")[0]);
      saveState();
      document.getElementById('guess').disabled=true;
      document.querySelector('button[onclick=\"submitGuess()\"]').disabled=true;
      showPopup(answer);
    }
  }
}

// Popup
function showPopup(word){
  document.getElementById('popup-message').innerText=`Level failed! The word was: ${word}`;
  document.getElementById('popup').style.display='block';
}

// Close popup
function closePopup(){
  document.getElementById('popup').style.display='none';
  if(mode==='levels'){
    if(currentLevel<49) startLevel(currentLevel+1);
    else document.getElementById('message').innerText="Game Over! All levels attempted.";
  }
}

// Reset progress
function resetProgress(){
  if(confirm("Are you sure you want to reset all progress?")){
    localStorage.clear();
    stats.levels={total:0,best:null};
    stats.daily={total:0,best:null};
    levelsCorrect=Array(50).fill(false);
    currentLevel=0;
    if(mode==='levels') startLevel(0);
    else startDaily();
    updateStats();
  }
}

// Start game
if(mode==='levels') switchMode('levels');
else switchMode('daily');
</script>

</body>
</html>
